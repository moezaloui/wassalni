<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajouter une Voiture</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  {% include 'elements/navbar.html' %}
  
  <div class="max-w-3xl mx-auto mt-20 px-4 py-8">
    <div class="bg-white rounded-lg shadow-lg">
      <!-- En-tête -->
      <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700">
        <div class="flex items-center gap-3">
          <a href="{% url 'mes_voitures' %}" class="text-white hover:text-blue-100">
            <i class="fas fa-arrow-left"></i>
          </a>
          <h1 class="text-2xl font-bold text-white">
            <i class="fas fa-car mr-2"></i>
            Ajouter une voiture
          </h1>
        </div>
      </div>

      <!-- Messages -->
      {% if messages %}
        <div class="px-6 pt-6 space-y-3">
          {% for message in messages %}
            <div class="p-4 rounded-lg flex items-center gap-3
              {% if message.tags == 'success' %}bg-green-100 text-green-800 border border-green-200
              {% elif message.tags == 'error' %}bg-red-100 text-red-800 border border-red-200
              {% else %}bg-blue-100 text-blue-800 border border-blue-200{% endif %}">
              <i class="fas {% if message.tags == 'success' %}fa-check-circle{% elif message.tags == 'error' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %}"></i>
              <span>{{ message }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Formulaire -->
      <form method="POST" class="px-6 py-6">
        {% csrf_token %}
        
        <!-- Section Identification -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
            <i class="fas fa-id-card text-blue-600"></i>
            Identification du véhicule
          </h3>
          
          <div class="space-y-6">
            <!-- Matricule -->
            <div>
              <label for="matricule" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-hashtag text-blue-500 mr-1"></i>
                Matricule <span class="text-red-500">*</span>
              </label>
              <input 
                type="text" 
                id="matricule" 
                name="matricule" 
                placeholder="Ex: 123 TU 1234"
                class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase"
                required
              >
              <p class="text-xs text-gray-500 mt-1">Format tunisien</p>
            </div>

            <!-- Marque et Modèle -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="marque" class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-copyright text-purple-500 mr-1"></i>
                  Marque <span class="text-red-500">*</span>
                </label>
                <select 
                  id="marque" 
                  name="marque" 
                  class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"
                  required
                >
                  <option value="">Sélectionnez une marque</option>
                  <option value="Peugeot">Peugeot</option>
                  <option value="Renault">Renault</option>
                  <option value="Citroën">Citroën</option>
                  <option value="Volkswagen">Volkswagen</option>
                  <option value="Toyota">Toyota</option>
                  <option value="Hyundai">Hyundai</option>
                  <option value="Kia">Kia</option>
                  <option value="Ford">Ford</option>
                  <option value="Opel">Opel</option>
                  <option value="Seat">Seat</option>
                  <option value="Fiat">Fiat</option>
                  <option value="Dacia">Dacia</option>
                  <option value="Mercedes-Benz">Mercedes-Benz</option>
                  <option value="BMW">BMW</option>
                  <option value="Audi">Audi</option>
                  <option value="Nissan">Nissan</option>
                  <option value="Mazda">Mazda</option>
                  <option value="Honda">Honda</option>
                  <option value="Chevrolet">Chevrolet</option>
                  <option value="Skoda">Skoda</option>
                  <option value="Autre">Autre</option>
                </select>
              </div>

              <div>
                <label for="modele" class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-car-side text-orange-500 mr-1"></i>
                  Modèle <span class="text-red-500">*</span>
                </label>
                <input 
                  type="text" 
                  id="modele" 
                  name="modele" 
                  placeholder="Ex: 208, Clio, Golf..."
                  class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  required
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Section Caractéristiques -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
            <i class="fas fa-cog text-blue-600"></i>
            Caractéristiques
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Année -->
            <div>
              <label for="annee" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-calendar text-green-500 mr-1"></i>
                Année <span class="text-red-500">*</span>
              </label>
              <input 
                type="number" 
                id="annee" 
                name="annee" 
                placeholder="2020"
                min="1980"
                max="2025"
                class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              >
            </div>

            <!-- Couleur -->
            <div>
              <label for="couleur" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-palette text-pink-500 mr-1"></i>
                Couleur <span class="text-red-500">*</span>
              </label>
              <select 
                id="couleur" 
                name="couleur" 
                class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"
                required
              >
                <option value="">Sélectionnez</option>
                <option value="Blanc">Blanc</option>
                <option value="Noir">Noir</option>
                <option value="Gris">Gris</option>
                <option value="Bleu">Bleu</option>
                <option value="Rouge">Rouge</option>
                <option value="Vert">Vert</option>
                <option value="Jaune">Jaune</option>
                <option value="Orange">Orange</option>
                <option value="Marron">Marron</option>
                <option value="Argent">Argent</option>
                <option value="Autre">Autre</option>
              </select>
            </div>

            <!-- Nombre de places -->
            <div>
              <label for="nbrPlaces" class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-users text-purple-500 mr-1"></i>
                Places <span class="text-red-500">*</span>
              </label>
              <input 
                type="number" 
                id="nbrPlaces" 
                name="nbrPlaces" 
                placeholder="5"
                min="2"
                max="9"
                class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              >
            </div>
          </div>
        </div>

        <!-- Section Description -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
            <i class="fas fa-comment-alt text-blue-600"></i>
            Description (optionnel)
          </h3>
          
          <div>
            <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
              <i class="fas fa-info-circle text-gray-500 mr-1"></i>
              Informations complémentaires
            </label>
            <textarea 
              id="description" 
              name="description" 
              rows="4"
              placeholder="Ex: Véhicule climatisé, GPS intégré, sièges en cuir..."
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            ></textarea>
            <p class="text-xs text-gray-500 mt-1">Décrivez les équipements ou particularités de votre véhicule</p>
          </div>
        </div>

        <!-- Boutons d'action -->
        <div class="flex gap-3 pt-6 border-t border-gray-200">
          <button 
            type="submit" 
            class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all"
          >
            <i class="fas fa-check-circle"></i>
            Enregistrer la voiture
          </button>
          <a 
            href="{% url 'mes_voitures' %}" 
            class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium text-center transition-all"
          >
            <i class="fas fa-times mr-2"></i>
            Annuler
          </a>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Auto-formatter le matricule en majuscules
    document.getElementById('matricule').addEventListener('input', function(e) {
      e.target.value = e.target.value.toUpperCase();
    });

    // Validation de l'année
    document.getElementById('annee').addEventListener('input', function(e) {
      const currentYear = new Date().getFullYear();
      if (e.target.value > currentYear + 1) {
        e.target.value = currentYear;
      }
    });
  </script>
</body>
</html>